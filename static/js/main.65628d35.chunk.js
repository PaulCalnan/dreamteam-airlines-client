(this["webpackJsonpdream-team-air"]=this["webpackJsonpdream-team-air"]||[]).push([[0],{38:function(e,t,s){},66:function(e,t,s){"use strict";s.r(t);var a=s(31),n=s.n(a),i=(s(38),s(19)),c=s(1),r=s(32),l=s(2),o=s(3),h=s(4),u=s(6),d=s(5),j=s(16),b=s(11),f=s(0),m=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={username:"",password:""},a.onChange=a.onChange.bind(Object(b.a)(a)),a.onSubmit=a.onSubmit.bind(Object(b.a)(a)),a}return Object(h.a)(s,[{key:"onChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t="https://paulcalnan.github.io/dreamteam-airlines-client/";e.preventDefault(),"chicken"===this.state.password?("Sam Gelwyn"===this.state.username&&(window.location.href="".concat(t,"/#/Sam Gelwyn")),"Joel Turnbull"===this.state.username&&(window.location.href="".concat(t,"/#/Joel Turnbull"))):window.location.href=t}},{key:"render",value:function(){return Object(f.jsxs)("form",{onSubmit:this.onSubmit,className:"login",children:[Object(f.jsxs)("div",{className:"login-field",children:[Object(f.jsx)("label",{className:"login-label",children:"Username"}),Object(f.jsx)("input",{className:"search-user",value:this.state.username,onChange:this.onChange,type:"text",name:"username"})]}),Object(f.jsxs)("div",{className:"login-field",children:[Object(f.jsx)("label",{className:"login-label",children:"Password"}),Object(f.jsx)("input",{className:"search-user",value:this.state.password,onChange:this.onChange,type:"password",name:"password"})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"res-button login-button",children:"Sign In"})})]})}}]),s}(c.PureComponent),O=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"login-form",children:[Object(f.jsxs)("div",{className:"flex-header",children:[Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsx)("h1",{className:"logo login-logo",children:"DREAMTEAM AIRLINES"}),Object(f.jsx)("h2",{className:"welcome",children:"Who arrives... Wins"})]}),Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("img",{src:"https://i.imgur.com/SeT47JK.jpg",alt:"Sam"})})]}),Object(f.jsx)("p",{children:"Have an account? Please login below."}),Object(f.jsx)(m,{}),Object(f.jsx)("p",{children:"Have a complaint? call 1800 DREAM and ask for David."})]})}}]),s}(c.PureComponent),p=s(13),g=s.n(p),v=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e))._handleClick=function(e){a.props.passFlightId(e)},a.state={flight_id:""},a._update=a._update.bind(Object(b.a)(a)),a}return Object(h.a)(s,[{key:"_update",value:function(e){this.setState({flight_id:e})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Our available flights shown below."}),this.props.flights_all.map((function(t){return Object(f.jsxs)("p",{children:[t.origin," to ",t.destination," on ",t.date,": Flight\xa0",t.number,Object(f.jsx)("button",{className:"res-button book",onClick:function(){e._handleClick(t.id)},children:"Book Flight"})]},t.id)}))]})}}]),s}(c.PureComponent),x=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={origin:"",destination:""},e.handleChange1=e.handleChange1.bind(Object(b.a)(e)),e.handleChange2=e.handleChange2.bind(Object(b.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(b.a)(e)),e}return Object(h.a)(s,[{key:"handleChange1",value:function(e){this.setState({origin:e.target.value})}},{key:"handleChange2",value:function(e){this.setState({destination:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.origin,this.state.destination),this.props.passResetFlightId()}},{key:"render",value:function(){return Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsxs)("label",{className:"search",children:[Object(f.jsx)("span",{className:"monospace",children:"Origin: \xa0 \xa0 \xa0 \xa0 \xa0  "}),Object(f.jsxs)("select",{value:this.state.origin,onChange:this.handleChange1,className:"select-city",children:[Object(f.jsx)("option",{value:"",children:"Select..."}),Object(f.jsx)("option",{value:"Sydney",children:"Sydney"}),Object(f.jsx)("option",{value:"Brisbane",children:"Brisbane"})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("label",{className:"search",children:[Object(f.jsx)("span",{className:"monospace",children:"Destination: \xa0 \xa0 \xa0"}),Object(f.jsxs)("select",{value:this.state.destination,onChange:this.handleChange2,className:"select-city",children:[Object(f.jsx)("option",{value:"",children:"Select..."}),Object(f.jsx)("option",{value:"Perth",children:"Perth"}),Object(f.jsx)("option",{value:"Melbourne",children:"Melbourne"})]})]}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"submit",value:"Search",className:"res-button"})]})}}]),s}(c.PureComponent),S=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).saveFlightId=function(e){a.setState({flight_id:e}),a.props.storeFlightId(e)},a.passResetFlightId=function(){a.props.resetFlightId()},a.state={flights:[],flight_id:""},a.fetchPlanes=a.fetchPlanes.bind(Object(b.a)(a)),a}return Object(h.a)(s,[{key:"fetchPlanes",value:function(e,t){g.a.get("https://dreamteam-airlines.herokuapp.com/flights.json").then(function(s){for(var a=[],n=0;n<s.data.length;n++)s.data[n].origin===e&&s.data[n].destination===t&&a.push(s.data[n]);this.setState({flights:a})}.bind(this))}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{onSubmit:this.fetchPlanes,passResetFlightId:this.passResetFlightId}),Object(f.jsx)(v,{flights_all:this.state.flights,passFlightId:this.saveFlightId})]})}}]),s}(c.PureComponent),k=s(22),N=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).checkIfTaken=function(){-1!==a.props.takenSeats.indexOf(a.props.seatId)?a.setState({isTaken:!0}):a.setState({isTaken:!1})},a._handleClick=function(e){a.props.getSelectedSeat(a.props.seatId),a.setState({isSelected:!0})},a.state={isTaken:!1},a}return Object(h.a)(s,[{key:"componentDidUpdate",value:function(){this.checkIfTaken()}},{key:"render",value:function(){return Object(f.jsx)("div",{className:this.state.isTaken?"seat taken":"seat free",onClick:this._handleClick,children:Object(f.jsx)("div",{className:this.props.selectedSeat!==this.props.seatId||this.state.isTaken?null:"selected"})})}}]),s}(c.PureComponent),C=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).getSelectedSeat=function(e){a.setState({selectedSeat:e}),a.props.passSeat(e)},a.state={selectedSeat:""},a}return Object(h.a)(s,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Seat Map"}),Object(f.jsx)("p",{children:"Please choose an available seat"}),Object(f.jsx)("div",{className:"grid-container",children:Object(k.a)(Array(this.props.rows)).map((function(t,s){return Object(f.jsxs)("div",{className:"grid-row",children:[Object(f.jsx)("span",{className:"row-num",children:String.fromCharCode(s+65)}),Object(k.a)(Array(e.props.columns)).map((function(t,a){return Object(f.jsx)(N,{seatId:"".concat(String.fromCharCode(s+65)).concat(a+1),takenSeats:e.props.takenSeats,getSelectedSeat:e.getSelectedSeat,selectedSeat:e.state.selectedSeat},"".concat(String.fromCharCode(s+65)).concat(a+1))}))]},s)}))}),Object(f.jsxs)("p",{children:["Selected Seat: ",this.state.selectedSeat]})]})}}]),s}(c.PureComponent);var y=function(e){return Object(f.jsxs)("div",{children:["Flight Number: ",e.flightNumber]})};var _=function(e){return Object(f.jsxs)("div",{children:["Passenger Name: ",e.userName]})};var w=function(e){return Object(f.jsx)("div",{className:"res-status",children:e.status})},I=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e))._handleClick=function(e,t){g.a.delete("https://dreamteam-airlines.herokuapp.com/reservations/".concat(e.id)).then(a.setState({status:"Reservation successfully cancelled."}))},a.state={status:""},a}return Object(h.a)(s,[{key:"render",value:function(){var e=this;if(0!==Object.keys(this.props.res).length){var t=this.props.res.reservations;return t.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"MY RESERVATIONS"}),t.map((function(s){return Object(f.jsxs)("div",{className:"flex-container",children:[Object(f.jsxs)("div",{className:"flight-details",children:[s.flight.date," Flight ",s.flight.number," - ",s.flight.origin," to ",s.flight.destination,", Seat ",s.seat,"    "]}),Object(f.jsx)("button",{className:"res-button book cancel flex-1",onClick:function(){e._handleClick(s,t)},children:"Cancel Reservation"})]},s.id)})),Object(f.jsx)("p",{className:"res-status",children:this.state.status})]}):Object(f.jsx)("div",{children:"No current reservations"})}return Object(f.jsx)("div",{children:"No current reservations"})}}]),s}(c.PureComponent),P=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"res-button",onClick:this.props.onClick,children:"Book"})})}}]),s}(c.PureComponent),F=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;Object(o.a)(this,s),(a=t.call(this,e)).saveSelected=function(e){a.setState({selectedSeat:e})},a.addNewRes=function(){g.a.post("https://dreamteam-airlines.herokuapp.com/reservations.json",{reservation:{seat:a.state.selectedSeat,flight_id:a.state.flight.id,user_id:a.state.user.id}}).then((function(e){a.setState({status:"Created"===e.statusText?"Reservation complete. Thank you for choosing Dreamteam.":""})})).catch((function(e){a.setState({status:"Request failed with status code 422"===e.message?"Sorry, that seat is unavailable. Please choose an available seat or call David for assistance.":""})}))},a.state={flight_id:e.flightId,flight:{},user:{},takenSeats:[],selectedSeat:"",status:""};return function e(t){console.log(t),g.a.get("https://dreamteam-airlines.herokuapp.com/flights/".concat(t,".json")).then((function(e){a.setState({flight:e.data})})).then((function(){var e=a.state.flight.reservations.slice().map((function(e){return e.seat}));a.setState({takenSeats:e})})),setTimeout((function(){e(a.state.flight_id)}),1e3)}(a.state.flight_id),function t(){g.a.get("https://dreamteam-airlines.herokuapp.com/users/".concat(e.user_id,".json")).then((function(e){return a.setState({user:e.data})})),setTimeout(t,1e3)}(),a}return Object(h.a)(s,[{key:"componentDidUpdate",value:function(){this.setState({flight_id:this.props.flightId})}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Make a reservation"}),Object(f.jsx)(_,{userName:this.state.user.name}),Object(f.jsx)(y,{flightNumber:this.state.flight.number,flightId:this.state.flight.id}),Object(f.jsx)(C,{rows:this.state.flight.rows,columns:this.state.flight.columns,takenSeats:this.state.takenSeats,passSeat:this.saveSelected}),Object(f.jsx)(P,{onClick:this.addNewRes}),Object(f.jsx)(w,{status:this.state.status}),this.state.user==={}?Object(f.jsx)(I,{res:this.state.user}):null]})}}]),s}(c.PureComponent),T=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).resetFlightId=function(){a.setState({flight_id:""})},a.storeFlightId=function(e){a.setState({prev_flight_id:a.state.flight_id,flight_id:e})},a.state={flight_id:"",prev_flight_id:"",username:e.username},a}return Object(h.a)(s,[{key:"clicking",value:function(e){e.preventDefault(),window.location.href="https://paulcalnan.github.io/dreamteam-airlines-client/"}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("form",{onSubmit:this.clicking,className:"logout",children:Object(f.jsxs)("div",{className:"flex-header",children:[Object(f.jsxs)("div",{className:"flex-1",children:[Object(f.jsxs)("p",{children:["WELCOME ",this.state.username.toUpperCase()]}),Object(f.jsx)("p",{children:"Search for a flight"})]}),Object(f.jsx)("div",{className:"flex-logout",children:Object(f.jsx)("button",{className:"res-button logout-button",children:"Sign Out"})})]})}),Object(f.jsx)(S,{storeFlightId:this.storeFlightId,resetFlightId:this.resetFlightId}),""!==this.state.flight_id?Object(f.jsx)(F,{user_id:this.props.user_id,flightId:this.state.flight_id}):null]})}}]),s}(c.PureComponent),R=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={username:e.location.pathname.substring(1)},a}return Object(h.a)(s,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"header header-flights flex-header",children:[Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("h1",{className:"logo",children:"DREAMTEAM AIRLINES"})}),Object(f.jsx)("div",{className:"flex-1",children:Object(f.jsx)("img",{src:"https://i.imgur.com/SeT47JK.jpg",alt:"Sam"})})]}),Object(f.jsx)(T,{user_id:this.props.user_id,username:this.state.username})]})}}]),s}(c.Component),D=Object(f.jsx)(r.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(l.a,{exact:!0,path:"/",component:O}),Object(f.jsx)(l.a,{exact:!0,path:"/Joel Turnbull",render:function(e){return Object(f.jsx)(R,Object(i.a)({user_id:"7"},e))}}),Object(f.jsx)(l.a,{exact:!0,path:"/Sam Gelwyn",render:function(e){return Object(f.jsx)(R,Object(i.a)({user_id:"8"},e))}})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),n.a.render(D,document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.65628d35.chunk.js.map